{% load static %}
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="utf-8">
    <title>{% block title %}TwoFA Site{% endblock %}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="{% static 'css/app.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
</head>
<body class="{% block body_class %}{% endblock %}">

<header class="app-navbar">
    <div class="app-navbar-inner">
        <a href="/" class="brand">
            <div class="brand-icon">VOZ</div>
            <span>Nhóm 9</span>
        </a>

        <nav class="nav-links">
            <a href="{% url 'forum:home' %}">Diễn đàn</a>

            {% if request.user.is_authenticated %}
                <div class="user-dropdown">
                    <a href="#" class="dropdown-toggle" style="font-weight: bold;">
                        Xin chào, {{ request.user.username }} <i class="fas fa-caret-down"></i>
                    </a>
                    
                    <div class="dropdown-menu">
                        <a href="{% url 'accounts:dashboard' %}">
                            <i class="fas fa-tachometer-alt" style="width: 20px;"></i> Dashboard
                        </a>
                        <a href="{% url 'accounts:profile_edit' %}">
                            <i class="fas fa-user-edit" style="width: 20px;"></i> Sửa hồ sơ
                        </a>
                        <a href="{% url 'accounts:change_password' %}">
                            <i class="fas fa-key" style="width: 20px;"></i> Đổi mật khẩu
                        </a>
                        
                        <div class="dropdown-divider"></div>

                        <a href="{% url 'accounts:logout_all' %}" 
                           style="color: #ff4757; font-weight: bold;">
                            <i class="fas fa-bomb" style="width: 20px;"></i> Đăng xuất tất cả trình duyệt
                        </a>

                        <a href="{% url 'accounts:logout' %}">
                            <i class="fas fa-sign-out-alt" style="width: 20px;"></i> Đăng xuất trình duyệt này
                        </a>
                    </div>
                </div>
            {% else %}
                <a href="{% url 'accounts:register' %}">Đăng ký</a>
                <a class="btn-small-accent" href="{% url 'accounts:login' %}">Đăng nhập</a>
            {% endif %}
        </nav>
    </div>
</header>

<main class="page-wrapper">
    {% block content %}
    {% endblock %}
</main>
<footer class="app-footer">
    <div class="app-footer-inner">
        <div class="footer-section">
            <a href="/" class="brand">
                <div class="brand-icon" style="background: none; color: var(--color-text-primary); font-weight: 600;">VOZ</div>
                <span>Nhóm 9_KLCN</span>
            </a>
            <p style="font-size: 14px; margin-top: 10px;">Diễn đàn trao đổi công nghệ và cuộc sống</p>
            <p style="font-size: 13px; color: #777;">&copy; Thuộc KLCN_BM09</p>
        </div>
        <div class="footer-section">
            <h4>Liên kết nhanh</h4>
            <ul>
                <li><a href="{% url 'forum:home' %}">Diễn đàn</a></li>
                <li><a href="{% url 'forum:thread_create' %}">Tạo chủ đề</a></li>
                {% if request.user.is_authenticated %}
                    <li><a href="{% url 'accounts:dashboard' %}">Tài khoản của tôi</a></li>
                {% else %}
                    <li><a href="{% url 'accounts:login' %}">Đăng nhập</a></li>
                {% endif %}
                
                <li><a href="{% url 'forum:contact' %}">Liên hệ </a></li>
            </ul>
        </div>
        <div class="footer-section">
            <h4>Tài khoản</h4>
            <ul>
                {% if request.user.is_authenticated %}
                    <li><a href="{% url 'accounts:change_password' %}">Đổi mật khẩu</a></li>
                    <li><a href="{% url 'accounts:logout' %}">Đăng xuất</a></li>
                {% else %}
                    <li><a href="{% url 'accounts:register' %}">Đăng ký</a></li>
                {% endif %}
            </ul>
        </div>
    </div>
</footer>

<script src="{% static 'js/app.js' %}"></script>
</body>
</html>